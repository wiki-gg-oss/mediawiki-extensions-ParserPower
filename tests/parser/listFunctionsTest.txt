!! options
version=2
!! end

# Force the test runner to ensure the extension is loaded
!! functionhooks
lstcnt
!! endfunctionhooks

!! article
Template:Empty
!! text
!! endarticle

!! article
Template:Remove
!! text
rEMovE
!! endarticle

!! article
Template:Remove/keep
!! text
KeEP
!! endarticle

!! article
Template:Remove/random
!! text
x y
!! endarticle

!! article
Template:Remove/if value
!! text
{{#switch: {{{1}}} | b | f | g | j = rEMovE }}
!! endarticle

!! article
Template:Remove/if fields
!! text
{{#switch: {{{1}}},{{{2|}}} | b ,l | c, m | ,n | d ,o: | e,p: p | f,q :r = rEMovE }}
!! endarticle

!! article
Template:Unique/constant
!! text
x
!! endarticle

!! article
Template:Unique/value
!! text
{{#switch: {{{1}}} | b | c | f = x | {{{1}}} }}
!! endarticle

!! test
{{#lstcnt}}
!! wikitext
"{{#lstcnt:}}"
"{{#lstcnt: ,,,, }}"
"{{#lstcnt: a, b ,c,d,,e ,f, ,g, h,i,j }}"
"{{#lstcnt: a, b ,C,D,,A ,b, ,c, D,E,f }}"
"{{#lstcnt: a; b ;C;D;;A ;b; ;c; D;E;f | ; }}"
!! html/php
<p>"0"
"0"
"10"
"10"
"10"
</p>
!! end

!! test
{{#lstcntuniq}}
!! wikitext
"{{#lstcntuniq:}}"
"{{#lstcntuniq: ,,,, }}"
"{{#lstcntuniq: a, b ,c,d,,e ,f, ,g, h,i,j }}"
"{{#lstcntuniq: a, b ,C,D,,A ,b, ,c, D,E,f }}"
"{{#lstcntuniq: a; b ;C;D;;A ;b; ;c; D;E;f | ; }}"
"{{#lstcntuniq: a; b ;C;D;;A ;b; ;c; D;E;f | ; | x y }}"
"{{#lstcntuniq: a; b ;C;D;;A ;b; ;c; D;E;f | ; | cS }}"
!! html/php
<p>"0"
"0"
"10"
"6"
"6"
"6"
"8"
</p>
!! end

!! test
{{#lstsep}}
!! wikitext
"{{#lstsep:}}"
"{{#lstsep: a, b ,c,d,,e ,f, ,g, h,i,j }}"
"{{#lstsep: a; b ;c;d;;e ;f; ;g; h;i;j | ; }}"
"{{#lstsep: a; b ;c;d;;e ;f; ;g; h;i;j | ; | }}"
"{{#lstsep: a; b ;c;d;;e ;f; ;g; h;i;j | ; | ! }}"
!! html/php
<p>""
"a, b, c, d, e, f, g, h, i, j"
"a, b, c, d, e, f, g, h, i, j"
"abcdefghij"
"a!b!c!d!e!f!g!h!i!j"
</p>
!! end

!! test
{{#lstelem}}
!! wikitext
"{{#lstelem:}}"
"{{#lstelem: a, b ,c,d,,e ,f, ,g, h,i,j }}"
"{{#lstelem: a; b ;c;d;;e ;f; ;g; h;i;j | ; }}"
!! html/php
<p>""
"a"
"a"
</p>
!! end

!! test
{{#lstelem}} index
!! wikitext
0: "{{#lstelem: a; b ;c;d;;e ;f; ;g; h;i;j | ; | 0 }}"
2: "{{#lstelem: a; b ;c;d;;e ;f; ;g; h;i;j | ; | 2 }}"
11: "{{#lstelem: a; b ;c;d;;e ;f; ;g; h;i;j | ; | 11 }}"
-2: "{{#lstelem: a; b ;c;d;;e ;f; ;g; h;i;j | ; | -2 }}"
-11: "{{#lstelem: a; b ;c;d;;e ;f; ;g; h;i;j | ; | -11 }}"
!! html/php
<p>0: ""
2: "b"
11: ""
-2: "i"
-11: ""
</p>
!! end

!! test
{{#lstsub}}
!! wikitext
"{{#lstsub:}}"
"{{#lstsub: a, b ,c,d,,e ,f, ,g, h,i,j }}"
"{{#lstsub: a; b ;c;d;;e ;f; ;g; h;i;j | ; }}"
"{{#lstsub: a; b ;c;d;;e ;f; ;g; h;i;j | ; | }}"
"{{#lstsub: a; b ;c;d;;e ;f; ;g; h;i;j | ; | ! }}"
!! html/php
<p>""
"a, b, c, d, e, f, g, h, i, j"
"a, b, c, d, e, f, g, h, i, j"
"abcdefghij"
"a!b!c!d!e!f!g!h!i!j"
</p>
!! end

!! test
{{#lstsub}} index
!! wikitext
0: "{{#lstsub: a; b ;c;d;;e ;f; ;g; h;i;j | ; | ! | 0 }}"
1: "{{#lstsub: a; b ;c;d;;e ;f; ;g; h;i;j | ; | ! | 1 }}"
3: "{{#lstsub: a; b ;c;d;;e ;f; ;g; h;i;j | ; | ! | 3 }}"
11: "{{#lstsub: a; b ;c;d;;e ;f; ;g; h;i;j | ; | ! | 11 }}"
-1: "{{#lstsub: a; b ;c;d;;e ;f; ;g; h;i;j | ; | ! | -1 }}"
-3: "{{#lstsub: a; b ;c;d;;e ;f; ;g; h;i;j | ; | ! | -3 }}"
-11: "{{#lstsub: a; b ;c;d;;e ;f; ;g; h;i;j | ; | ! | -11 }}"
!! html/php
<p>0: "a!b!c!d!e!f!g!h!i!j"
1: "a!b!c!d!e!f!g!h!i!j"
3: "c!d!e!f!g!h!i!j"
11: ""
-1: "j"
-3: "h!i!j"
-11: "a!b!c!d!e!f!g!h!i!j"
</p>
!! end

!! test
{{#lstsub}} length
!! wikitext
0: "{{#lstsub: a; b ;c;d;;e ;f; ;g; h;i;j | ; | ! | 3 | 0 }}"
1: "{{#lstsub: a; b ;c;d;;e ;f; ;g; h;i;j | ; | ! | 3 | 1 }}"
3: "{{#lstsub: a; b ;c;d;;e ;f; ;g; h;i;j | ; | ! | 3 | 3 }}"
9: "{{#lstsub: a; b ;c;d;;e ;f; ;g; h;i;j | ; | ! | 3 | 9 }}"
-1: "{{#lstsub: a; b ;c;d;;e ;f; ;g; h;i;j | ; | ! | 3 | -1 }}"
-3: "{{#lstsub: a; b ;c;d;;e ;f; ;g; h;i;j | ; | ! | 3 | -3 }}"
-9: "{{#lstsub: a; b ;c;d;;e ;f; ;g; h;i;j | ; | ! | 3 | -9 }}"
!! html/php
<p>0: ""
1: "c"
3: "c!d!e"
9: "c!d!e!f!g!h!i!j"
-1: "c!d!e!f!g!h!i"
-3: "c!d!e!f!g"
-9: ""
</p>
!! end

!! test
{{#lstfnd}}
!! wikitext
"{{#lstfnd:}}"
"{{#lstfnd: E }}"
"{{#lstfnd: E | }}"
"{{#lstfnd: E | a, b ,c,d,,e ,f, ,g, h,i,j }}"
"{{#lstfnd: E | a; b ;c;d;;e ;f; ;g; h;i;j | ; }}"
"{{#lstfnd: E | a; b ;c;d;;e ;f; ;g; h;i;j | ; }}"
"{{#lstfnd: E | a; b ;c;d;;e ;f; ;g; h;i;j | ; | }}"
"{{#lstfnd: E | a; b ;c;d;;e ;f; ;g; h;i;j | ; | cS }}"
!! html/php
<p>""
""
""
"e"
"e"
"e"
"e"
""
</p>
!! end

!! test
{{#lstfnd}} item
!! wikitext
"{{#lstfnd: | a; b ;c;d;;e ;f; ;g; h;i;j | ; }}"
a: "{{#lstfnd: a | a; b ;c;d;;e ;f; ;g; h;i;j | ; }}"
e: "{{#lstfnd: e | a; b ;c;d;;e ;f; ;g; h;i;j | ; }}"
j: "{{#lstfnd: j | a; b ;c;d;;e ;f; ;g; h;i;j | ; }}"
x: "{{#lstfnd: x | a; b ;c;d;;e ;f; ;g; h;i;j | ; }}"
c;d: "{{#lstfnd: c;d | a; b ;c;d;;e ;f; ;g; h;i;j | ; }}"
!! html/php
<p>""
a: "a"
e: "e"
j: "j"
x: ""
c;d: ""
</p>
!! end

!! test
{{#lstfnd}} case sensitivity
!! wikitext
"{{#lstfnd: e | a; b ;c;d;;e ;f; ;g; h;i;j | ; | }}" / "{{#lstfnd: E | a; b ;c;d;;e ;f; ;g; h;i;j | ; | }}"
ncs: "{{#lstfnd: e | a; b ;c;d;;e ;f; ;g; h;i;j | ; | NcS }}" / "{{#lstfnd: E | a; b ;c;d;;e ;f; ;g; h;i;j | ; | NcS }}"
cs: "{{#lstfnd: e | a; b ;c;d;;e ;f; ;g; h;i;j | ; | cS }}" / "{{#lstfnd: E | a; b ;c;d;;e ;f; ;g; h;i;j | ; | cS }}"
!! html/php
<p>"e" / "e"
ncs: "e" / "e"
cs: "e" / ""
</p>
!! end

!! test
{{#lstind}}
!! wikitext
"{{#lstind:}}"
"{{#lstind: E }}"
"{{#lstind: E | }}"
"{{#lstind: E | a, b ,c,d,,e ,f, ,g, h,i,j }}"
"{{#lstind: E | a; b ;c;d;;e ;f; ;g; h;i;j | ; }}"
"{{#lstind: E | a; b ;c;d;;e ;f; ;g; h;i;j | ; }}"
"{{#lstind: E | a; b ;c;d;;e ;f; ;g; h;i;j | ; | }}"
"{{#lstind: E | a; b ;c;d;;e ;f; ;g; h;i;j | ; | cs }}"
!! html/php
<p>""
""
""
"5"
"5"
"5"
"5"
""
</p>
!! end

!! test
{{#lstind}} item
!! wikitext
"{{#lstind: | a; b ;c;d;;e ;f; ;g; h;i;j | ; }}"
a: "{{#lstind: a | a; b ;c;d;;e ;f; ;g; h;i;j | ; }}"
e: "{{#lstind: e | a; b ;c;d;;e ;f; ;g; h;i;j | ; }}"
j: "{{#lstind: j | a; b ;c;d;;e ;f; ;g; h;i;j | ; }}"
x: "{{#lstind: x | a; b ;c;d;;e ;f; ;g; h;i;j | ; }}"
c;d: "{{#lstind: c;d | a; b ;c;d;;e ;f; ;g; h;i;j | ; }}"
!! html/php
<p>""
a: "1"
e: "5"
j: "10"
x: ""
c;d: ""
</p>
!! end

!! test
{{#lstind}} options
!! wikitext
"{{#lstind: e | a; b ;c;d;;e ;f; ;g; e;i;j | ; | }}" / "{{#lstind: E | a; b ;c;d;;e ;f; ;g; e;i;j | ; | }}"
ncs: "{{#lstind: e | a; b ;c;d;;e ;f; ;g; e;i;j | ; | NcS }}" / "{{#lstind: E | a; b ;c;d;;e ;f; ;g; e;i;j | ; | NcS }}"
cs: "{{#lstind: e | a; b ;c;d;;e ;f; ;g; e;i;j | ; | cS }}" / "{{#lstind: E | a; b ;c;d;;e ;f; ;g; e;i;j | ; | cS }}"
asc: "{{#lstind: e | a; b ;c;d;;e ;f; ;g; e;i;j | ; | aSC }}" / "{{#lstind: E | a; b ;c;d;;e ;f; ;g; e;i;j | ; | aSC }}"
desc: "{{#lstind: e | a; b ;c;d;;e ;f; ;g; e;i;j | ; | DeSc }}" / "{{#lstind: E | a; b ;c;d;;e ;f; ;g; e;i;j | ; | DeSc }}"
pos: "{{#lstind: e | a; b ;c;d;;e ;f; ;g; e;i;j | ; | POs }}" / "{{#lstind: E | a; b ;c;d;;e ;f; ;g; e;i;j | ; | POs }}"
neg: "{{#lstind: e | a; b ;c;d;;e ;f; ;g; e;i;j | ; | Neg }}" / "{{#lstind: E | a; b ;c;d;;e ;f; ;g; e;i;j | ; | Neg }}"
ncs asc pos: "{{#lstind: e | a; b ;c;d;;e ;f; ;g; e;i;j | ; | NcS aSC POs }}" / "{{#lstind: E | a; b ;c;d;;e ;f; ;g; e;i;j | ; | NcS aSC POs }}"
cs desc neg: "{{#lstind: e | a; b ;c;d;;e ;f; ;g; e;i;j | ; | cS DeSc Neg }}" / "{{#lstind: E | a; b ;c;d;;e ;f; ;g; e;i;j | ; | cS DeSc Neg }}"
!! html/php
<p>"5" / "5"
ncs: "5" / "5"
cs: "5" / ""
asc: "5" / "5"
desc: "8" / "8"
pos: "5" / "5"
neg: "-6" / "-6"
ncs asc pos: "5" / "5"
cs desc neg: "-3" / ""
</p>
!! end

!! test
{{#lstapp}}
!! wikitext
"{{#lstapp:}}"
"{{#lstapp: a, b ,c,d,,e ,f, ,g, h,i,j }}"
"{{#lstapp: a; b ;c;d;;e ;f; ;g; h;i;j | ; }}"
"{{#lstapp: a; b ;c;d;;e ;f; ;g; h;i;j | ; | }}"
"{{#lstapp: | ; | x }}"
"{{#lstapp: a; b ;c;d;;e ;f; ;g; h;i;j | ; | x }}"
!! html/php
<p>""
"a,b,c,d,e,f,g,h,i,j"
"a;b;c;d;e;f;g;h;i;j"
"a;b;c;d;e;f;g;h;i;j"
"x"
"a;b;c;d;e;f;g;h;i;j;x"
</p>
!! end

!! test
{{#lstprep}}
!! wikitext
"{{#lstprep:}}"
"{{#lstprep: x }}"
"{{#lstprep: x | ; }}"
"{{#lstprep: x | ; | }}"
"{{#lstprep: | ; | a; b ;c;d;;e ;f; ;g; h;i;j }}"
"{{#lstprep: x | ; | a; b ;c;d;;e ;f; ;g; h;i;j }}"
!! html/php
<p>""
"x"
"x"
"x"
"a;b;c;d;e;f;g;h;i;j"
"x;a;b;c;d;e;f;g;h;i;j"
</p>
!! end

!! test
{{#lstjoin}}
!! wikitext
"{{#lstjoin:}}"
"{{#lstjoin: a  b  c de f   ghi j }}"
"{{#lstjoin: a; b ;c;d;;e ;f; ;g; h;i;j | ; }}"
"{{#lstjoin: a; b ;c;d;;e ;f; ;g; h;i;j | ; | k  l  m no p   qrs t }}"
"{{#lstjoin: a; b ;c;d;;e ;f; ;g; h;i;j | ; | k; l ;m;n;;o ;p; ;q; r;s;t | ; }}"
"{{#lstjoin: a; b ;c;d;;e ;f; ;g; h;i;j | ; | k; l ;m;n;;o ;p; ;q; r;s;t | ; | \_; }}"
!! html/php
<p>""
"a, b, c, d, e, f, g, h, i, j"
"a, b, c, d, e, f, g, h, i, j"
"a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r, s, t"
"a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r, s, t"
"a ;b ;c ;d ;e ;f ;g ;h ;i ;j ;k ;l ;m ;n ;o ;p ;q ;r ;s ;t"
</p>
!! end

!! test
{{#listfilter}}
!! wikitext
"{{#listfilter:}}"
"{{#listfilter: list = a, b ,c,d,,e ,f, ,g, h,i,j }}"
"{{#listfilter: list = a; b ;c;d;;e ;f; ;g; h;i;j | insep = ; }}"
"{{#listfilter: list = a, b ,c,d,,e ,f, ,g, h,i,j | outsep = ; }}"
"{{#listfilter: list = a, b ,c,d,,e ,f, ,g, h,i,j | intro = ( | outro = ) }}"
"{{#listfilter: list = a, b ,c,d,,e ,f, ,g, h,i,j | intro = @( | outro = )@ | counttoken = @ }}"
"{{#listfilter: list = a, b ,c,d,,e ,f, ,g, h,i,j | default = def }}"
"{{#listfilter: default = def }}"
!! html/php
<p>""
"a, b, c, d, e, f, g, h, i, j"
"a, b, c, d, e, f, g, h, i, j"
"a;b;c;d;e;f;g;h;i;j"
"(a, b, c, d, e, f, g, h, i, j)"
"10(a, b, c, d, e, f, g, h, i, j)10"
"a, b, c, d, e, f, g, h, i, j"
"def"
</p>
!! end

!! test
{{#listfilter}} by pattern
!! wikitext
"{{#listfilter: list = a, b ,c,d,,e ,f, ,g, h,i,j | pattern = }}"
"{{#listfilter: list = a, b ,c,d,,e ,f, ,g, h,i,j | pattern = KeEP }}"
"{{#listfilter: list = a, b ,c,d,,e ,f, ,g, h,i,j | pattern = x y }}"
"{{#listfilter: list = a, b ,c,d,,e ,f, ,g, h,i,j | pattern = rEMovE }}"
"{{#listfilter: list = a, b ,c,d,,e ,f, ,g, h,i,j | pattern = {\{#switch: @ \! 2 \! 6 \! 7 \! 10 = rEMovE }\} | indextoken = @ }}"
"{{#listfilter: list = a, b ,c,d,,e ,f, ,g, h,i,j | pattern = {\{#switch: @ \! b \! f \! g \! j = rEMovE }\} | token = @ }}"
"{{#listfilter: list = a:k, b :l ,c: m,:n,d :o:,e:p: p, ,f:q :r, g : s | pattern = {\{#switch: @1,@2 \! b ,l \! c, m \! ,n \! d ,o: \! e,p: p \! f,q :r = rEMovE }\} | token = @1 , @2 | fieldsep = : }}"
"{{#listfilter: list = a:k, b :l ,c: m,:n,d :o:,e:p: p, ,f:q :r, g : s | pattern = {\{#switch: @1,@2 \! b ,l \! c, m \! ,n \! d ,o: \! e,p: p \! f,q :r = rEMovE }\} | token = @1 ; @2 | fieldsep = : | tokensep = ; }}"
!! html/php
<p>"a, b, c, d, e, f, g, h, i, j"
"a, b, c, d, e, f, g, h, i, j"
"a, b, c, d, e, f, g, h, i, j"
""
"a, c, d, e, h, i"
"a, c, d, e, h, i"
"a:k, g&#160;: s"
"a:k, g&#160;: s"
</p>
!! end

!! test
{{#listfilter}} by template
!! wikitext
"{{#listfilter: list = a, b ,c,d,,e ,f, ,g, h,i,j | template = empty }}"
"{{#listfilter: list = a, b ,c,d,,e ,f, ,g, h,i,j | template = remove/keep }}"
"{{#listfilter: list = a, b ,c,d,,e ,f, ,g, h,i,j | template = remove/random }}"
"{{#listfilter: list = a, b ,c,d,,e ,f, ,g, h,i,j | template = remove }}"
"{{#listfilter: list = a, b ,c,d,,e ,f, ,g, h,i,j | template = remove/if value }}"
"{{#listfilter: list = a:k, b :l ,c: m,:n,d :o:,e:p: p, ,f:q :r, g : s | template = remove/if fields | fieldsep = : }}"
!! html/php
<p>"a, b, c, d, e, f, g, h, i, j"
"a, b, c, d, e, f, g, h, i, j"
"a, b, c, d, e, f, g, h, i, j"
""
"a, c, d, e, h, i"
"a:k, b :l, c: m, d :o:, e:p: p, f:q :r, g&#160;: s"
</p>
!! end

!! test
{{#listfilter}} by exclusion
!! wikitext
"{{#listfilter: list = a, b ,c,d,,e ,f, ,g, h,i,j | remove = }}"
"{{#listfilter: list = a, b ,c,d,,e ,f, ,g, h,i,j | remove = b,F, g ,J }}"
"{{#listfilter: list = a, b ,c,d,,e ,f, ,g, h,i,j | remove = b;F; g ;J | removesep = ; }}"
"{{#listfilter: list = a, b ,c,d,,e ,f, ,g, h,i,j | remove = b;F; g ;J | removesep = ; | removecs = x y }}"
"{{#listfilter: list = a, b ,c,d,,e ,f, ,g, h,i,j | remove = b;F; g ;J | removesep = ; | removecs = yES }}"
!! html/php
<p>"a, b, c, d, e, f, g, h, i, j"
"a, c, d, e, h, i"
"a, c, d, e, h, i"
"a, c, d, e, h, i"
"a, c, d, e, f, h, i, j"
</p>
!! end

!! test
{{#listfilter}} by inclusion
!! wikitext
"{{#listfilter: list = a, b ,c,d,,e ,f, ,g, h,i,j | keep = }}"
"{{#listfilter: list = a, b ,c,d,,e ,f, ,g, h,i,j | keep = b,F, g ,J }}"
"{{#listfilter: list = a, b ,c,d,,e ,f, ,g, h,i,j | keep = b;F; g ;J | keepsep = ; }}"
"{{#listfilter: list = a, b ,c,d,,e ,f, ,g, h,i,j | keep = b;F; g ;J | keepsep = ; | keepcs = x y }}"
"{{#listfilter: list = a, b ,c,d,,e ,f, ,g, h,i,j | keep = b;F; g ;J | keepsep = ; | keepcs = yES }}"
!! html/php
<p>"a, b, c, d, e, f, g, h, i, j"
"b, f, g, j"
"b, f, g, j"
"b, f, g, j"
"b, g"
</p>
!! end

!! test
{{#listfilter}} mode priority
!! wikitext
"{{#listfilter: list = a, b ,c,d,,e ,f, ,g, h,i,j | keep = a,c,d,e,h,i | remove = a,b,c,d,e,f,g,h,i,j }}"
"{{#listfilter: list = a, b ,c,d,,e ,f, ,g, h,i,j | keep = a,c,d,e,h,i | template = remove }}"
"{{#listfilter: list = a, b ,c,d,,e ,f, ,g, h,i,j | keep = a,c,d,e,h,i | pattern = rEMovE }}"
"{{#listfilter: list = a, b ,c,d,,e ,f, ,g, h,i,j | remove = b,f,g,j | template = remove }}"
"{{#listfilter: list = a, b ,c,d,,e ,f, ,g, h,i,j | remove = b,f,g,j | pattern = rEMovE }}"
"{{#listfilter: list = a, b ,c,d,,e ,f, ,g, h,i,j | template = remove/if value | pattern = rEMovE }}"
!! html/php
<p>"a, c, d, e, h, i"
"a, c, d, e, h, i"
"a, c, d, e, h, i"
"a, c, d, e, h, i"
"a, c, d, e, h, i"
"a, c, d, e, h, i"
</p>
!! end

!! test
{{#lstfltr}}
!! wikitext
"{{#lstfltr:}}"
"{{#lstfltr: b;F; g ;J }}"
"{{#lstfltr: b;F; g ;J | ; }}"
"{{#lstfltr:           | ; | a, b ,c,d,,e ,f, ,g, h,i,j }}"
"{{#lstfltr: b;F; g ;J | ; | a, b ,c,d,,e ,f, ,g, h,i,j }}"
"{{#lstfltr: b;F; g ;J | ; | a; b ;c;d;;e ;f; ;g; h;i;j | ; }}"
"{{#lstfltr: b;F; g ;J | ; | a; b ;c;d;;e ;f; ;g; h;i;j | ; | ! }}"
"{{#lstfltr: b;F; g ;J | ; | a; b ;c;d;;e ;f; ;g; h;i;j | ; | ! | x y }}"
"{{#lstfltr: b;F; g ;J | ; | a; b ;c;d;;e ;f; ;g; h;i;j | ; | ! | cS }}"
!! html/php
<p>""
""
""
""
"b, f, g, j"
"b, f, g, j"
"b!f!g!j"
"b!f!g!j"
"b!g"
</p>
!! end

!! test
{{#lstrm}}
!! wikitext
"{{#lstrm:}}"
"{{#lstrm: B }}"
"{{#lstrm:   | a, b ,c,d,,e ,f, ,g, h,i,j }}"
"{{#lstrm: B | a, b ,c,d,,e ,f, ,g, h,i,j }}"
"{{#lstrm: B | a; b ;c;d;;e ;f; ;g; h;i;j | ; }}"
"{{#lstrm: B | a; b ;c;d;;e ;f; ;g; h;i;j | ; | ! }}"
"{{#lstrm: B | a; b ;c;d;;e ;f; ;g; h;i;j | ; | ! | x y }}"
"{{#lstrm: b | a; b ;c;d;;e ;f; ;g; h;i;j | ; | ! | cS }}"
"{{#lstrm: B | a; b ;c;d;;e ;f; ;g; h;i;j | ; | ! | cS }}"
!! html/php
<p>""
""
"a, b, c, d, e, f, g, h, i, j"
"a, c, d, e, f, g, h, i, j"
"a, c, d, e, f, g, h, i, j"
"a!c!d!e!f!g!h!i!j"
"a!c!d!e!f!g!h!i!j"
"a!c!d!e!f!g!h!i!j"
"a!b!c!d!e!f!g!h!i!j"
</p>
!! end

!! test
{{#listunique}}
!! wikitext
"{{#listunique:}}"
"{{#listunique: list = a, b ,C,D,,A ,b, ,c, D,E,f }}"
"{{#listunique: list = a, b ,C,D,,A ,b, ,c, D,E,f | uniquecs = x y }}"
"{{#listunique: list = a, b ,C,D,,A ,b, ,c, D,E,f | uniquecs = yES }}"
"{{#listunique: list = a; b ;C;D;;A ;b; ;c; D;E;f | insep = ; }}"
"{{#listunique: list = a, b ,C,D,,A ,b, ,c, D,E,f | outsep = ! }}"
"{{#listunique: list = a, b ,C,D,,A ,b, ,c, D,E,f | intro = ( | outro = ) }}"
"{{#listunique: list = a, b ,C,D,,A ,b, ,c, D,E,f | intro = @( | outro = )@ | counttoken = @ }}"
"{{#listunique: default = def }}"
!! html/php
<p>""
"a, b, C, D, E, f"
"a, b, C, D, E, f"
"a, b, C, D, A, c, E, f"
"a, b, C, D, E, f"
"a!b!C!D!E!f"
"(a, b, C, D, E, f)"
"6(a, b, C, D, E, f)6"
"def"
</p>
!! end

!! test
{{#listunique}} by pattern
!! wikitext
"{{#listunique: list = a, b ,C,D,,A ,b, ,c, D,E,f | pattern = }}"
"{{#listunique: list = a, b ,C,D,,A ,b, ,c, D,E,f | pattern = x }}"
"{{#listunique: list = a, b ,C,D,,A ,b, ,c, D,E,f | pattern = {\{#expr: trunc( @ / 2 ) }\} | indextoken = @ }}"
"{{#listunique: list = a, b ,C,D,,A ,b, ,c, D,E,f | pattern = {\{#switch: @ \! b \! c \! f = x \! @ }\} | token = @ }}"
!! html/php
<p>"a, b, C, D, E, f"
"a, b, C, D, E, f"
"a, b, D, b, D, f"
"a, b, C, D, A, E"
</p>
!! end

!! test
{{#listunique}} by template
!! wikitext
"{{#listunique: list = a, b ,C,D,,A ,b, ,c, D,E,f | template = empty }}"
"{{#listunique: list = a, b ,C,D,,A ,b, ,c, D,E,f | template = unique/constant }}"
"{{#listunique: list = a, b ,C,D,,A ,b, ,c, D,E,f | template = unique/value }}"
!! html/php
<p>"a"
"a"
"a, b, C, D, A, E"
</p>
!! end

!! test
{{#lstuniq}}
!! wikitext
"{{#lstuniq:}}"
"{{#lstuniq: a, b ,C,D,,A ,b, ,c, D,E,f }}"
"{{#lstuniq: a; b ;C;D;;A ;b; ;c; D;E;f | ; }}"
"{{#lstuniq: a; b ;C;D;;A ;b; ;c; D;E;f | ; | ! }}"
"{{#lstuniq: a; b ;C;D;;A ;b; ;c; D;E;f | ; | ! | x y }}"
"{{#lstuniq: a; b ;C;D;;A ;b; ;c; D;E;f | ; | ! | cS }}"
!! html/php
<p>""
"a, b, C, D, E, f"
"a, b, C, D, E, f"
"a!b!C!D!E!f"
"a!b!C!D!E!f"
"a!b!C!D!A!c!E!f"
</p>
!! end
